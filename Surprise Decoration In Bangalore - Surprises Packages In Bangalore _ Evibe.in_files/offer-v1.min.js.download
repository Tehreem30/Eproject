function reportError(e){var r=new XMLHttpRequest;r.open("POST","/report/notify/error",!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(e)}if("undefined"==typeof jQuery&&reportError("url=&textStatus=Jquery load error&errorThrown=Jquery not loaded while loading the offer model"),"undefined"==typeof Cookies){var jQueryScript=document.createElement("script");jQueryScript.setAttribute("src","https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"),document.head.appendChild(jQueryScript)}if("undefined"==typeof datetimepicker){var jQueryScript=document.createElement("script");jQueryScript.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js"),document.head.appendChild(jQueryScript)}var vars=[],hash,q=document.URL.split("?")[1];if(document.URL.split("?")[0].indexOf("land-All")>0)vars.ref="inorg";else if(void 0!==q){q=q.split("&");for(var i=0;i<q.length;i++)hash=q[i].split("="),vars.push(hash[1]),vars[hash[0]]=hash[1]}(void 0!==vars.ofid&&void 0!==vars.oftn&&vars.ofid.length>0&&vars.oftn.length>0||"inorg"==vars.ref)&&$.ajax({url:"/of/landing/validate",type:"POST",tryCount:0,retryLimit:3,data:{ofId:vars.ofid,ofTn:vars.oftn,ref:vars.ref},success:function(e){function r(){$(".offer-signup-submit-btn").removeClass("hide"),$(".submitting-offer-signup").addClass("hide")}function t(){$(".offer-signup-submit-btn").addClass("hide"),$(".submitting-offer-signup").removeClass("hide")}$("body").append(e);var o=$("#modalOfferLandingSignUp"),i=1;$(".offer-landing-party-date").datetimepicker({timepicker:!1,minDate:0,format:"Y/m/d",scrollInput:!1,scrollMonth:!1,scrollTime:!1,closeOnDateSelect:!0,disabledDates:window.disableDates(),onSelectDate:function(e,r){r.parent().addClass("is-dirty")}});var n=parseInt(Cookies.get("offerSignUpSubmit"),10);0===$(".modal.in").length&&2!==n&&(modalTriggerTime={1:"0",2:"10000"},$.each(modalTriggerTime,function(e,r){setTimeout(function(){(1===parseInt(e,10)||2===parseInt(e,10)&&2===i)&&o.modal({show:!0,backdrop:"static",keyboard:!1})},r)})),$(".offer-signup-close-btn").on("click",function(){var e=new Date((new Date).setHours(23,59,59,999));i=2,Cookies.set("offerSignUpClose","2",{expires:e})}),$(".offer-signup-submit-btn").on("click",function(e){e.preventDefault(),t();var o=$(this).data("url"),i={offerLandingSignUpPhone:$(".offer-landing-signup-phone").val(),sourceUrl:window.location.href,partyDate:$(".offer-landing-party-date").val(),ofId:vars.ofid,ofTn:vars.oftn,ref:vars.ref};$.ajax({url:o,type:"POST",data:i,success:function(e){e.success?($("#modalOfferLandingSignUp").find(".col-xs-12").empty(),$(".offer-signup-thankyou").removeClass("hide"),$(".offer-landing-coupon-code").text(e.referralCode),Cookies.set("offerSignUpSubmit","2",{expires:40})):(r(),window.showNotyError(e.errorMsg))},error:function(e,t,i){r(),window.showNotyError("An error occurred while submitting your request. Please try again later."),reportError("url="+o+"&textStatus="+t+"&errorThrown="+i)}})})},error:function(e,r,t){this.tryCount++,this.tryCount<=this.retryLimit?$.ajax(this):reportError("url=of-landing-validate&textStatus="+r+"&errorThrown="+t)}});